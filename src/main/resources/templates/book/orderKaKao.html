<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{ layout/layout }">

    <div layout:fragment="content">
<head>
    <meta charset="UTF-8">
    <title>Book Order Result</title>
    
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
    crossorigin="anonymous" />
    
    <style>
        * {
            font-family: 'NanumBarunGothic';        
        }
    </style>
</head>
<body>
<div class="w-75 container"><!-- 메인 화면 블록 start -->
    <!-- 진행 순서 보여주기 -->
    <ul class="list-group list-group-horizontal">
        <li class="list-group-item border-0" style="color:gray;">01 CART</li>
        <li class="list-group-item border-0" style="color:gray;">></li>
        <li class="list-group-item border-0" style="color:gray;">02 ORDER</li>
        <li class="list-group-item border-0" style="color:gray;">></li>
        <li class="list-group-item border-0" style="font-weight: bold;">03 ORDER CONFIRMED</li>
    </ul>
    
    <div class="h2 container">
    <span th:text="${ user.username }"></span><span>님, 지식이 +1 되셨습니다!</span>
    </div>
    
    <div>
        주문번호: [<span th:text="${ orderNo }"></span>] 결제가 안전하게 처리되었습니다!
    </div>
    
    <img src="images/kakaoQR.jpg" />
    
    <div class="text-bg-warning rounded" style="height:200px;">
        <div class="text-center">
            <div class="h3"><span th:text="${ user.username }"></span>님, QR 찍고 결제 완료시 바로 발송됩니다~~!</div>
            <hr/>
            <div><span th:text="'결제금액: ' + |${#numbers.formatInteger(total, 0, 'COMMA')}원|"></span></div>
            <div>결제 시기에 따라 도착예상일이 변경될 수 있습니다. 입금 완료 후, <a th:href="@{ /myPage }">마이페이지 > 주문내역</a> 에서 꼭 확인 부탁드립니다.</div>
        </div>
    </div>
    
    <h1>배송지 정보</h1>
    <ul>
        <li><span th:text="'받는 분: ' + ${ user.username }"></span></li>
        <li><span th:text="'주소: (' + ${ order.postcode } + ') ' + ${ order.address } + ' ' + ${ order.detailAddress }"></span></li>
        <li>배송예정일: 결제일 기준 2~3일 소요</li>
    </ul>
    

    <span th:text="${ user.username }"></span>
    <span>님이 주문하신 책은..</span>
    <div class="w-100 text-bg-light rounded">
        <div class="row justify-content-start"><!-- 수정 -->
            <div class="col-3" th:each="orderFromCartDto : ${ orderInfo }">
                <div class="card my-2" style="width: 15rem; height:33rem">
                    <a th:href="@{ /detail(id=${ orderFromCartDto.id }) }">
                        <img th:src="${ orderFromCartDto.bookImage }" class="card-img-top" alt="테스트">
                    </a>
                    <div class="card-body">
                        <div class="card-text">
                            <div><small class="d-inline-flex px-2 my-1 border rounded text-secondary">
                                 <span th:text="${ orderFromCartDto.bookgroup }"></span><span> / </span><span th:text="${ orderFromCartDto.category }"></span>
                                 </small>
                            </div>
                            <span class="h5" th:text="${ orderFromCartDto.bookName }"></span><br/>
                            <span th:text="${ orderFromCartDto.author }"></span><br/>
                            <span th:text="|${#numbers.formatInteger(orderFromCartDto.prices, 0, 'COMMA')}원|"></span>
                        </div>
                    </div> <!-- card body end -->
                </div> <!-- card end -->
            </div> <!-- col end -->
        </div> <!-- row end -->
    </div>

    <div class="row justify-content-center">
        <button onclick="location.href='/myPage';" type="button" class="col-3 m-2 btn btn-outline-dark" style="width:150px">마이페이지</button>
        <button onclick="location.href='/';" type="button" class="col-3 m-2 btn btn-outline-dark" style="width:150px">HOME</button>
    </div>

</div><!-- 메인 화면 블록 end -->

<script
src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
crossorigin="anonymous">
</script>

</body>
</div>
</html>
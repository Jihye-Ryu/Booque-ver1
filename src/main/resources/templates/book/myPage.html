<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{ layout/layout }">

<div layout:fragment="content">

<head>
    <meta charset="UTF-8">
    <title>My Page</title>
    
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
        crossorigin="anonymous" />
        
    <style>
        * {
            font-family: 'NanumBarunGothic';        
        }
    </style>
</head>
<body>

    <!-- 상단에 프로필 넣고자(like 교보문고) -->


    <div class="row"> <!-- 메인 데이터 -->
    
        <div class="col-2 m-4 p-2" style="height:500px;">
                <div class="card" align="left" style="margin:20px; width: 200px; height: 750px;"><!-- 프로필  -->
                     <div>
                         <img th:src="${ user.userImage }" alt="null"  width="200px" height="280px" class="img-fluid rounded-start">
                     </div>
                     
            <form id="profileM">
                     <label for="profile" class="btn btn-outline-dark ">프로필 
                        <img style="width: 15px; height: 15px;" alt="" th:src="@{ https://cdn-icons-png.flaticon.com/512/738/738853.png }">
                     </label>
                     <input type="file" id="profile" name="userImage" accept="image/jpg, image/png" style="display:none"> 
                     
                     <br/>
                     <label class="btn">아이디</label> <input name="username"   th:value="${ user.username }"  readonly>
                     <label class="btn">닉네임</label> <input name="nickName"  class="btn btn-secondary"  th:value="${ user.nickName }"  >
                     <label class="btn">이메일</label> <input name="email"  class="btn btn-secondary"  th:value="${ user.email }"  >
                     <label class="btn">번호</label> <input name="phone" class="btn btn-secondary"  th:value="${ user.phone }"  >
                     
                     
            </form>
                     <button id="modify" class="btn"> <img style="width: 15px; height: 15px;" alt="" th:src="@{ https://cdn-icons-png.flaticon.com/512/738/738853.png }"> </button>
        
                </div><!-- 프로필 끝 -->          
        </div> <!-- col end -->


        <div class="col-8 container">
            <div class="row"> <!-- 박스 div -->
                <div class="col m-4 border rounded-4 text-bg-light" style="width:300px; height:200px;">
                    <div class="h4 p-4">회원등급</div>
                </div>
                <div class="col m-4 border rounded-4 text-bg-light" style="width:300px; height:200px;">
                    <div class="h4 p-4">포인트</div>
                </div>
                <div class="col m-4 border rounded-4 text-bg-light" style="width:300px; height:200px;">
                    <div class="h4 p-4">위시리스트</div>
                </div>
            </div> <!-- box row end -->

            <h4>최근 주문 내역</h4>
            <table class="table">
                <thead>
                    <tr class="border-top border-4" >
                        <th>주문일</th>
                        <th>주문내역</th>
                        <th>주문번호</th>
                        <th>결제금액</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each=" order : ${ orderList }">
                        <td class="align-middle">
                            <div th:text="${ order.orderDate }"></div>
                        </td>
                        <td>
                      <a th:href="@{ /detail?id={bookId} (bookId = ${ order.book.bookId })}" th:bookId="${order.book.bookId}" ><img th:src="${ order.book.bookImage }" style="width: 150px;"></a>
 
                        </td>
                        
                        <td class="align-middle">
                            <small class="d-inline-flex px-2 my-1 border rounded text-secondary">
                                <span  th:text="${ order.book.bookgroup }"></span><span> / </span><span th:text="${ order.book.category }"></span>
                            </small>
                            <div th:text="${ order.book.bookName}"></div>
                        </td>
                        <td class="align-middle">
                            <small class="d-inline-flex px-2 my-1 border rounded text-secondary">
                                <span >주문번호</span><br/>
                            </small>
                            <div  th:text="${order.orderNo }"></div>
                        </td>
    
                    </tr>
                </tbody>
            </table>


        
        </div> <!-- col end -->


    </div> <!-- (row) 메인 데이터 end -->
    
    
    
    
    
    <div class="row"> <!-- 2번째  -->
    
        <div class="col-2 m-4 p-2" style="height:500px;">
                    <h4 class="my-2">나의 쇼핑정보</h4>
            <ul class="list-group list-group-flush">
                <li class="list-group-item text-secondary">주문내역조회</li>
                <li class="list-group-item text-secondary">반품내역</li>
                <li class="list-group-item text-secondary">책 리뷰</li>
                <br/><br/>
            </ul>
            <h4 class="my-2">나의 계정설정</h4>
            <ul class="list-group list-group-flush">
                <li class="list-group-item text-secondary">회원정보수정</li>
                <li class="list-group-item text-secondary">회원등급</li>
                <li class="list-group-item text-secondary">포인트조회</li>
                <br/><br/>
            </ul>
            <h4 class="my-2">고객센터</h4>
            <ul class="list-group list-group-flush">
                <li class="list-group-item text-secondary">1대1문의</li>
                <li class="list-group-item text-secondary">공지사항</li>
                <br/><br/>
            </ul>
        
        </div>
        
        <div class="col-8 container">
                    <h4>장바구니</h4>
            <table class="table">
                <thead>
                    <tr class="border-top border-4">
                        <th>주문일</th>
                        <th>주문내역</th>
                        <th>주문번호</th>
                        <th>결제금액</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2022.12.15</td>
                        <td>어린왕자</td>
                        <td>202212151</td>
                        <td>15,000원</td>
                    </tr>
                    <tr>
                        <td>2022.12.15</td>
                        <td>어린왕자</td>
                        <td>202212151</td>
                        <td>15,000원</td>
                    </tr>
                </tbody>
            </table>
        
        
        <h4>My WISH</h4> 
        
            <hr/>
            <div class="m-2 border text-bg-light" style="width:200px; height:250px;"></div>
            <div>다다다</div>
            <div>김영하 작가</div>
            <h4>My WISH</h4><span>더보기>></span>
            <hr/>
        
        
        </div>
    

    </div> <!-- 2row end -->
    
    
    

    



    <script type="text/javascript">
    
    const formP = document.querySelector('#profileM')
    const btnModify = document.querySelector('#modify')
    
    btnModify.addEventListener('click', e => {
    	const result = confirm('회원정보 변경?')
        if(result){
        	formP.action='/mypage/modify';
        	formP.method='post';
        	formP.submit();
        	
        }
    	
    	
    })
    

    
    
    
    </script>
    

    
</body> 
</div>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{ layout/layout }">

<div layout:fragment="content">

<head>
    <meta charset="UTF-8">
    <title>Book Detail</title>

    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
        crossorigin="anonymous" />

    <style>
        * {
            font-family: 'NanumBarunGothic';
        }
    </style>

</head>
<body>

        <!-- Modal -->
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary"
            data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            로그인</button>

        <!-- Modal 2 -->
        <div class="modal fade" id="exampleModalToggle"
            aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
            tabindex="-1" data-bs-backdrop="static"
            data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5"
                            id="exampleModalToggleLabel">회원가입 페이지</h1>
                        <button type="button" class="btn-close"
                            data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form method="post">
                            <div class="input-box my-2">
                                <label for="signupUsername"
                                    class="input-label">아이디</label> <input
                                    type="text" id="signupUsername"
                                    name="signupUsername"
                                    class="input-item form-control"
                                    placeholder="아이디" autofocus
                                    onchange="checkValue(this);">
                            </div>
                            <div class="my-2 d-none" id="nameok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-success">사용할 수 있는 아이디</p>
                            </div>
                            <div class="my-2 d-none" id="namenok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-danger">사용할 수 없는 아이디</p>
                            </div>
                            <div class="input-box my-2">
                                <label for="signupPassword"
                                    class="input-label">비밀번호</label> <input
                                    type="password" id="signupPassword"
                                    name="signupPassword"
                                    class="input-item form-control"
                                    placeholder="비밀번호"
                                    onchange="checkValue(this);">
                            </div>
                            <div class="input-box my-2">
                                <label for="signupEmail"
                                    class="input-label">이메일</label> <input
                                    type="email" id="signupEmail"
                                    name="signupEmail"
                                    class="input-item form-control"
                                    placeholder="이메일"
                                    onchange="checkValue(this);">
                            </div>
                            <div class="my-2 d-none" id="emailok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-success">사용할 수 있는 이메일</p>
                            </div>
                            <div class="my-2 d-none" id="emailnok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-danger">사용할 수 없는 이메일</p>
                            </div>
                            <div class="input-box my-2">
                                <label for="signupNickname"
                                    class="input-label">닉네임</label> <input
                                    type="text" id="signupNickname"
                                    name="signupNickname"
                                    class="input-item form-control"
                                    placeholder="닉네임"
                                    onchange="checkValue(this);">
                            </div>
                            <div class="my-2 d-none" id="nickok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-success">사용할 수 있는 닉네임</p>
                            </div>
                            <div class="my-2 d-none" id="nicknok">
                                <!-- d = display. 화면에 보여주지 않겠다. -->
                                <p class="text-danger">사용할 수 없는 닉네임</p>
                            </div>
                            <div class="input-box my-2">
                                <label for="signupName"
                                    class="input-label">실명</label> <input
                                    type="text" id="signupName"
                                    name="signupName"
                                    class="input-item form-control"
                                    placeholder="실명"
                                    onchange="checkValue(this);">
                            </div>
                            <div class="input-box my-2">
                                <label for="signupPhone"
                                    class="input-label">핸드폰번호</label> <input
                                    type="text" id="signupPhone"
                                    name="signupPhone"
                                    class="input-item form-control"
                                    placeholder="핸드폰번호"
                                    onchange="checkValue(this);">
                            </div>
                            <div class="input-box my-2">
                                <label for="signupaddress"
                                    class="input-label">주소</label> <input
                                    type="text" id="signupaddress"
                                    name="signupaddress"
                                    class="input-item form-control"
                                    placeholder="주소"
                                    onchange="checkValue(this);">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            data-bs-dismiss="modal">취소</button>
                        <button id="registerConfirmBtn"
                            class="btn btn-primary btnSubmit"
                            data-bs-target="#exampleModalToggle2"
                            data-bs-toggle=""
                            onclick="modalConfirm(this);">확인</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="exampleModalToggle2"
            aria-hidden="true"
            aria-labelledby="exampleModalToggleLabel2" tabindex="-1"
            data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5"
                            id="exampleModalToggleLabel2">회원 정보 확인</h1>
                        <button type="button" class="btn-close"
                            data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="registerForm" action="./user/signup"
                            method="post">
                            <div class="input-box my-2">
                                <label for="username"
                                    class="input-label">아이디</label> <input
                                    type="text" id="username"
                                    name="username"
                                    class="input-item form-control"
                                    placeholder="아이디" readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="password"
                                    class="input-label" hidden="true">비밀번호</label>
                                <input type="password" id="password"
                                    name="password"
                                    class="input-item form-control"
                                    placeholder="비밀번호" required
                                    hidden="true" readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="email" class="input-label">이메일</label>
                                <input type="email" id="email"
                                    name="email"
                                    class="input-item form-control"
                                    placeholder="이메일" required readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="nickname"
                                    class="input-label">닉네임</label> <input
                                    type="text" id="nickname"
                                    name="nickname"
                                    class="input-item form-control"
                                    placeholder="닉네임" required readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="name" class="input-label">실명</label>
                                <input type="text" id="name" name="name"
                                    class="input-item form-control"
                                    placeholder="주소" required readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="phone" class="input-label">핸드폰번호</label>
                                <input type="text" id="phone"
                                    name="phone"
                                    class="input-item form-control"
                                    placeholder="주소" required readonly>
                            </div>
                            <div class="input-box my-2">
                                <label for="address" class="input-label">주소</label>
                                <input type="text" id="address"
                                    name="address"
                                    class="input-item form-control"
                                    placeholder="주소" required readonly>
                            </div>
                            <hr />
                            <div>
                                <h6>위 정보로 회원가입을 하시겠습니까?</h6>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary"
                            data-bs-target="#exampleModalToggle"
                            data-bs-toggle="modal">이전</button>
                        <button type="button" class="btn btn-primary"
                            onclick="sendForm('register'); alertNewUser();">완료</button>
                    </div>
                </div>
            </div>
        </div>
        <a class="btn btn-primary" data-bs-toggle="modal"
            id="registerUser" href="#exampleModalToggle" role="button">회원가입</a>

        <!-- detail 페이지에 보여질 내용!! -->

        <!-- 도서 간단 정보 및 장바구니, 구매하기 버튼 블록 -->
        <div class="w-50 container">
            <div class="row my-5">
                <!-- 도서 이미지 -->
                <div class="col">
                    <img th:src="${ book.bookImage }" style="width: 450px; height: 650px" />
                </div>

                <!-- 도서 정보(+ 도서 정보 추가하기_있으면) -->
                <div class="col border-top border-bottom border-4 border-dark">
<form id="addCartInfo">
                <div>
                <input type="text" name="userId" value="2">님이 보고 계신 책은..
                    </div> 
                    <div class="row">
                        <div class="col-10 h2 my-4" th:text="${ book.bookName }"></div>
                        <div class="col-2 my-2">
                        <!--/* 찜하기는 나중에 */-->
                        <!-- <img src="#" style="width: 50px" />  -->
                        </div>
                    </div>
                
                <input type="hidden" id="id" name="id" th:value="${ book.bookId }"> 

                <div th:text="${ book.author }"><span style="color: gray;"> 저자</span></div>
                <div th:text="${ book.publisher }"></div>
                <div>
                    ★ ★ ★ ★ <span th:text="${ score }"></span>
                </div>
                <div class="my-2"style="font-weight: bold;">
                    <input type="hidden" name="price" th:value="${ book.prices }"> 
                    <span style="font-size: large;"  th:text="${ book.prices }"></span>
                    <span>원</span>
                </div>
                <div class="my-2"style="font-weight: bold;">
                    <span style="font-size: large;"  th:text="${ book.prices * 0.05 }"></span>
                    <span>포인트</span>
                </div>
                <div>
                    <div>수량</div>
                    <input name="count" class="w-50" type="number" min="1" />
                </div>
</form>           
                <div class="btn-group my-2 w-100" role="group" aria-label="Basic example">
                    <!-- 
                    <button type="button" class="w-50 btn btn-outline-dark">장바구니</button>  --> <!-- 장바구니 페이지 이동 -->
                    
                    <!-- (하은) 장바구니 페이지 갈지말지 -->
                    <!-- Button trigger modal -->
                    <button type="button" class="w-50 btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#exampleModal">장바구니</button>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Cart</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">장바구니로 이동하시겠습니까?</div>
                                <div class="modal-footer">
                                    <button id="btnContinueShopping" type="submit" class="btn btn-outline-dark" data-bs-dismiss="modal">계속 쇼핑하기</button>
                                    <button id="btnGoCart" type="submit" class="btn btn-dark" data-bs-dismiss="modal">장바구니 가기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button onclick="clip()" type="button" class="w-50 btn btn-dark">공유하기</button>
                </div>
                <button id="btnOrderNow" type="button" class="w-100 btn btn-danger">구매하기</button> <!-- 결제 페이지 이동 -->
            </div>
        </div>

            <!-- nav바 메뉴 바로가기(버튼 누르면 해당 부분으로 스크롤) -->
            <nav id="navbar-example2"
                class="navbar border-bottom px-3 mb-3">
                <ul class="nav nav-pills">
                    <li class="nav-item"><a class="nav-link"
                        href="#bookInfo">도서정보</a></li>
                    <li class="nav-item"><a class="nav-link"
                        href="#bookReview">리뷰/한줄평</a></li>
                    <li class="nav-item"><a class="nav-link"
                        href="#bookPayInfo">배송/반품/교환</a></li>
                    <li class="nav-item dropdown"><a
                        class="nav-link dropdown-toggle"
                        data-bs-toggle="dropdown" href="#" role="button"
                        aria-expanded="false">구매하기</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item"
                                href="#scrollspyHeading3">장바구니</a></li>
                            <li><a class="dropdown-item"
                                href="#scrollspyHeading4">결제하기</a></li>
                        </ul></li>
                </ul>
            </nav>

            <!-- 도서정보 부분 -->
            <div data-bs-spy="scroll" data-bs-target="#navbar-example2"
                data-bs-root-margin="0px 0px -40%"
                data-bs-smooth-scroll="true"
                class="scrollspy-example p-3 rounded-2" tabindex="0">

                <h4 id="bookInfo" th:text="${ book.bookName }"></h4>
                <p th:text="${ book.bookIntro }"></p>

                <div>
                    <img loading="lazy"
                        th:src="${ book.bookIntroImage }">
                </div>


                <!-- 현재 보여지는 책은 보이면 안됨 + 이미지 비율 수정하기 -->
                <!-- (하은) 작가의 다른 책 보여주기 -->
                <span class="h4" th:text="${ book.author }"></span><span>
                    작가의 다른 책</span>

                <div id="carouselExampleInterval"
                    class="p-2 carousel slide bg-light"
                    data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active"
                            data-bs-interval="10000">
                            <div class="row">
                                <div class="col"
                                    th:each="book : ${ authorOtherBook }">
                                    <div class="card my-2"
                                        style="width: 15rem; height: 450px;">
                                        <div
                                            style="width: 237px; height: 330px;">
                                            <a
                                                th:href="@{ /detail(id=${ book.bookId }) }"><img
                                                th:src="${ book.bookImage }"
                                                class="card-img-top"
                                                alt="테스트"></a>
                                        </div>
                                        <div class="card-body">
                        <div class="card-text">
                            <div><small class="d-inline-flex px-2 my-1 border rounded text-secondary">
                                <span th:text="${ book.bookgroup }"></span><span> / </span><span th:text="${ book.category }"></span>
                            </small></div>
                            <span class="h5" th:text="${ book.bookName }"></span><br/>
                            <span th:text="${ book.author }"></span><br/>
                            <span th:text="${ book.prices }"></span><span>원</span>
                        </div>
                    </div> <!-- card body end -->
                </div> <!-- card end -->
                </div> <!-- col end -->
            </div> <!-- row end -->
            </div>
        </div>
    </div>


                <!-- 리뷰 & 한줄평 부분 / 개인 블로그 페이지로 이동 -->
                <div class="row">
                    <div id="bookReview" class="h4 col">리뷰</div>

                    <!-- 최신순, 선호도 등 -->
                    <div class="dropdown col">
                        <button
                            class="btn btn-outline-dark dropdown-toggle"
                            type="button" data-bs-toggle="dropdown"
                            aria-expanded="false" style="float: right;">최신순</button>
                        <ul class="dropdown-menu">
                            <li><button class="dropdown-item"
                                    id="orderDesc">최신 순</button></li>
                            <li><button class="dropdown-item"
                                    id="orderReply">댓글 순 아직
                                    안됨.</button></li>
                            <li><button class="dropdown-item"
                                    id="orderScoreDesc">별점 높은순</button></li>
                            <li><button class="dropdown-item"
                                    id="orderScore">별점낮은 순</button></li>
                        </ul>
                    </div>

                    
        
      
        <!-- 리뷰 & 한줄평 부분 / 개인 블로그 페이지로 이동 -->
        <div class="row">
            <div id="bookReview" class="h4 col">리뷰</div>
            <div class="col-2 my-2">
              <a th:href="@{ /post/create?id={bookId} (bookId = ${ book.bookId })}">리뷰작성</a>        
            </div>
            <!-- 최신순, 선호도 등 -->
            <div class="dropdown col">
                <button class="btn btn-outline-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="float: right;">최신순</button>
                <ul class="dropdown-menu">
                    <li><button class="dropdown-item"  id="orderDesc" >최신 순</button></li>
                    <li><button class="dropdown-item"  id="orderReply" >댓글 순 아직 안됨.</button></li>
                    <li><button class="dropdown-item"  id="orderScoreDesc" >별점 높은순</button></li>
                    <li><button class="dropdown-item"  id="orderScore" >별점낮은 순</button></li>
                </ul>
            </div>
        </div>
        
        <!-- 리뷰(+ 긴글은 일부분만 볼 수 있도록 수정하기 -->

        <!-- (하은) 리뷰 페이지 넘기기 -->
        <nav aria-label="Page navigation example">
            <ul class="pagination" style="justify-content : center;">
                <li class="page-item">
                    <a class="page-link text-dark" href="#" aria-label="Previous"> 
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item"><a class="page-link text-dark" href="#">1</a></li>
                <li class="page-item"><a class="page-link text-dark" href="#">2</a></li>
                <li class="page-item"><a class="page-link text-dark" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link text-dark" href="#" aria-label="Next"> 
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
        
          <!--/* th:each를 통해서 불러오기  
          
     <div  th:each="post : ${ postList }">
            <div class="my-2">
            <a th:href="@{ /post/list }"
            th:text="${ post.postWriter }"></a>
             </div>
            <div  th:text="${ post.myScore }"></div>
            <div th:text="${ post.title }"></div>
            <p class="border-bottom" th:text="${ post.postContent }"></p>
        </div>
        
        <!-- ajax를 이용한 Post 출력 순서만 변경하면 됨  bookDetailPost.js파일임 -->
        <div id="postOrder"></div>
        */-->

                <!-- ajax를 이용한 Post 출력 순서만 변경하면 됨  bookDetailPost.js파일임 -->
                <div id="postOrder"></div>




                <!-- Likes -->

                <img id="likes" alt=""
                    th:src="@{ https://cdn-icons-png.flaticon.com/512/7476/7476962.png }">
                <img id="likes" alt=""
                    th:src="@{ https://cdn-icons-png.flaticon.com/512/833/833472.png }">


                <!--  comment  -->


                <div class="row">
                    <div id="bookReview" class="h4 col">한줄평</div>

                    <!-- 정렬-> 최신순, 하트 순 -->
                    <div class="dropdown col">
                        <button
                            class="btn btn-outline-dark dropdown-toggle"
                            type="button" data-bs-toggle="dropdown"
                            aria-expanded="false" style="float: right;">최신순</button>
                        <ul class="dropdown-menu">
                            <!-- 최신순이 원래 기본 -->
                            <li><button class="dropdown-item"
                                    id="btnOrderDesc">최신 순</button></li>
                            <li><button class="dropdown-item"
                                    id="btnOrderLikes">하트 순</button></li>

                        </ul>
                    </div>
                </div>

                <!-- 한줄평 AJax -->
                <div id="bookComment"></div>

                <!-- 한줄평 작성하기 -->
                <div class="my-2 p-2 border">
                    <div class="col-4">
                        <input class="form-control " id="commentWriter"
                            type="number" placeholder="유저번호" />
                    </div>
                    <div class="row">
                        <div class="col-10 my-2">
                            <input class="form-control" id="commentText"
                                type="text"
                                placeholder="로그인을 하고 한줄평을 남겨보세요!"
                                aria-label="default input example">
                        </div>
                        <div class="col-2 my-2">
                            <button type="button" class="btn btn-dark"
                                id="btnComment" style="float: right;">작성</button>
                        </div>
                    </div>
                </div>

                <!--  comment  하트 증가는 못함 /-->


                <!-- 배송/반품/교환 관련 정보 부분 -->
                <h4 id="bookPayInfo" class="border-bottom p-2">배송/반품/교환
                    안내</h4>

                <th:block
                    th:replace="fragments/bookDetailFooter :: bookDetailFooter"></th:block>
            </div>
            <!-- ???? -->

        </div>
        <!-- 전체 블록 사이즈때문에 묶어놓은 것 end -->



        <!--/* layout으로 묶을 경우 <th:block layout:fragment="script">로 묶어주기 */-->


        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous">
    </script>
        <script
            src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script th:inline="javascript"> //로그인 유저 정보 넣을 예정    </script>
        <script th:src="@{ /js/comment.js }"></script>

        <!-- choi -->
        <script th:src="@{ /js/bookDetailPost.js }"></script>

        <!-- hyeok! -->
        <script>
    const modalConfirm = (tar) => {
    let signupUsername = document.getElementById('signupUsername');
    let signupPassword = document.getElementById('signupPassword');
    let signupEmail = document.getElementById('signupEmail');
    let signupNickname = document.getElementById('signupNickname');
    let signupName = document.getElementById('signupName');
    let signupPhone = document.getElementById('signupPhone')
    let signupaddress = document.getElementById('signupaddress');
    console.log('modalConfirm');
    console.log(`data-type : ${tar.getAttribute('data-bs-toggle')}`);

    
    if(signupUsername.value === '' || signupUsername.value === ' ') return signupUsername.focus();
    if(signupPassword.value === '' || signupPassword.value === ' ') return signupPassword.focus();
    if(signupEmail.value === '' || signupEmail.value === ' ') return signupEmail.focus();
    if(signupNickname.value === '' || signupNickname.value === ' ') return signupNickname.focus();
    if(signupName.value === '' || signupName.value === ' ') return signupName.focus();
    if(signupPhone.value === '' || signupPhone.value === ' ') return signupPhone.focus();
    if(signupaddress.value === '' || signupaddress.value === ' ') return signupaddress.focus();
    


    document.getElementById('username').value = signupUsername.value;
    document.getElementById('password').value = signupPassword.value;
    document.getElementById('email').value = signupEmail.value;
    document.getElementById('nickname').value = signupNickname.value;
    document.getElementById('name').value = signupName.value;
    document.getElementById('phone').value = signupPhone.value;
    document.getElementById('address').value = signupaddress.value;

    
    
    return false;
    }

    //회원가입정보가 전부 들어갔는지 각각 체크하는 함수
    const checkValue = (tar) =>{
        if(signupUsername.value != '' && signupPassword.value != '' && signupEmail.value != '' &&
              signupNickname.value != '' && signupName.value != '' && signupPhone.value != '' && signupaddress.value != ''){ //모든 값이 반 값이 아닐때
            document.getElementById('registerConfirmBtn').setAttribute('data-bs-toggle','modal');
    
        }else{ //빈 값이 하나라도 있을 때
            document.getElementById('registerConfirmBtn').setAttribute('data-bs-toggle','');
  
        }
        return false;
    }

    const sendForm = (type) => {

        if(type === 'register'){
            const registerForm = document.getElementById('registerForm');
            registerForm.submit();
        }else if(type === 'login'){

            if(document.getElementById('signinUsername').value === '' || document.getElementById('signinUsername').value === ' ') return document.getElementById('signinUsername').focus();
            if(document.getElementById('signinPassword').value === '' || document.getElementById('signinPassword').value === ' ') return document.getElementById('signinPassword').focus();

            const loginForm = document.getElementById('loginForm');
            loginForm.submit();
        }

        
        
        return false;
       
    }
    window.addEventListener('DOMContentLoaded', function() {
       
       const usernameInput = document.querySelector('#signupUsername');
       const emailInput = document.querySelector('#signupEmail');
       const nicknameInput = document.querySelector('#signupNickname');
       
       const nameokDiv = document.querySelector('#nameok');
       const emailokDiv = document.querySelector('#emailok');
       const nickokDiv = document.querySelector('#nickok');
       const namenokIdv = document.querySelector('#namenok');
       const emailnokDiv = document.querySelector('#emailnok');
       const nicknokDiv = document.querySelector('#nicknok');
       
       const btnSubmit = document.querySelector('.btnSubmit');
       
        let nameok = false;
        let emailok = false;
        let nickok = false;
    
       usernameInput.addEventListener('change', function() {
            
            const username = usernameInput.value;
            axios
            .get('/user/checkid?username=' + username) // GET Ajax 요청 보냄.
            .then(response => { displayNameCheckResult(response.data) }) // 성공(HTTP 200) 응답 콜백
            .catch(err => { console.log(err); }); // 실패 응답 콜백
            
            
        });
       
       function displayNameCheckResult(data) {
            if (data == 'nameok') { // 사용할 수 있는 아이디
                nameokDiv.className = 'my-2';
                namenokDiv.className = 'my-2 d-none';
                nameok = true;
            } else {
                nameokDiv.className = 'my-2 d-none';
                namenokDiv.className = 'my-2';
            }
        }
   
       
       nicknameInput.addEventListener('change', function() {
          
          const nickname = nicknameInput.value;
            axios
            .get('/user/checknick?nickname=' + nickname) // GET Ajax 요청 보냄.
            .then(response => { displayNickCheckResult(response.data) }) // 성공(HTTP 200) 응답 콜백
            .catch(err => { console.log(err); }); // 실패 응답 콜백
          
           
            
       });
       
        function displayNickCheckResult(data) {
             if (data == 'nickok') { // 사용할 수 있는 아이디
                 nickokDiv.className = 'my-2';
                 nicknokDiv.className = 'my-2 d-none';
                 nickok = true;
             } else {
                 nickokDiv.className = 'my-2 d-none';
                 nicknokDiv.className = 'my-2';
             }
         }
       
       emailInput.addEventListener('change', function () {
          
          const email = emailInput.value;
            axios
            .get('/user/checkemail?email=' + email) // GET Ajax 요청 보냄.
            .then(response => { displayEmailCheckResult(response.data) }) // 성공(HTTP 200) 응답 콜백
            .catch(err => { console.log(err); }); // 실패 응답 콜백
            
            
       });
       
       function displayEmailCheckResult(data) {
            if (data == 'emailok') { // 사용할 수 있는 아이디
                emailokDiv.className = 'my-2';
                emailnokDiv.className = 'my-2 d-none';
                emailok = true;
            } else {
                emailokDiv.className = 'my-2 d-none';
                emailnokDiv.className = 'my-2';
            }
        }

        document.getElementById('signupaddress').addEventListener('change', function () {
          
            if(nameok == emailok == nickok == true){
                document.getElementById('registerConfirmBtn').className.remove('disabled');
                console.log('true 지렁');
            }else{
                console.log('false 지렁');
            }
            
            
       });
       
    });
    
    function displayBtnSubmit(data) {
        if (nameok == nickok == emailok == true) {
            btnSubmit.className.remove('disabled');
        } else {
            return;
        }
    }
    
    function alertNewUser() {
       alert("BOOQUE의 가족이 되신걸 환영합니다!")
    };
       
    </script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> -->

        <script>
        // (하은) 장바구니 버튼 
        const addCartInfo = document.querySelector('#addCartInfo');

        // 계속 쇼핑하기
        const btnContinueShopping = document.querySelector('#btnContinueShopping');
        btnContinueShopping.addEventListener('click', function () {
            alert('해당 책이 장바구니에 추가되었습니다!');
          addCartInfo.action = '/cart/onlyAdd';
          addCartInfo.method = 'post';
          addCartInfo.submit();
        })
        
        // 장바구니 가기
        const btnGoCart = document.querySelector('#btnGoCart');
        btnGoCart.addEventListener('click', function () {        	
            addCartInfo.action = '/cart/add';
            addCartInfo.method = 'post';
            addCartInfo.submit();
        })
        
        // 바로 구매하기 버튼 -> 해당 책 데이터만 order 테이블에 추가됨
        const btnOrderNow = document.querySelector('#btnOrderNow');
        btnOrderNow.addEventListener('click', function() {
            addCartInfo.action = '/order';
            addCartInfo.method = 'post';
            addCartInfo.submit();
        })
        
        </script>
        
        <script type="text/javascript">
        // (하은) 공유하기 버튼 누르면 url 복사됨
        function clip(){
        
            var url = '';
            var textarea = document.createElement("textarea");
            document.body.appendChild(textarea);
            url = window.document.location.href;
            textarea.value = url;
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            alert("URL이 복사되었습니다.")
        }
        
        </script>

</body>
 </div>
</html>